# sar 명령어

- System Activity Report

- 시스템을 모니터링할 때 사용되는 명령어이다.

## **-P 옵션**

- processor를 의미한다.

  ```sh
  $ sar -P CPU번호 주기(초)
  ```

- 일정 주기(초)마다 해당 코어의 활동을 볼 수 있다.

  ```sh
  $ sar -P 0 1      # 0번 프로세서에 대한 정보를 1초마다 확인
  Linux 5.11.0-27-generic (ubun2-GL63-8RC) 	2021년 09월 06일 	_x86_64_	(8 CPU)

  01시 02분 52초     CPU     %user     %nice   %system   %iowait    %steal     %idle
  01시 02분 53초       0      5.05      0.00      2.02      0.00      0.00     92.93
  01시 02분 54초       0      4.95      0.00      1.98      0.00      0.00     93.07
  01시 02분 55초       0      4.17      0.00      2.08      0.00      0.00     93.75
  ^C                # Ctrl + C 로 실행을 멈추면 아직까지의 평균값을 출력한다.

  평균값:        0      4.73      0.00      2.03      0.00      0.00     93.24
  ```

- CPU번호 대신 `ALL` 키워드(대문자)를 입력하면 모든 프로세서에 대한 값을 볼 수 있다.

  ```sh
  $ sar -P ALL 1
  Linux 5.11.0-27-generic (ubun2-GL63-8RC) 	2021년 09월 06일 	_x86_64_	(8 CPU)

  01시 06분 46초     CPU     %user     %nice   %system   %iowait    %steal     %idle
  01시 06분 47초     all      6.06      0.00      1.77      0.00      0.00     92.17
  01시 06분 47초       0      4.04      0.00      1.01      0.00      0.00     94.95
  01시 06분 47초       1     11.00      0.00      3.00      0.00      0.00     86.00
  01시 06분 47초       2     13.00      0.00      1.00      0.00      0.00     86.00
  01시 06분 47초       3      6.12      0.00      1.02      0.00      0.00     92.86
  01시 06분 47초       4      5.00      0.00      4.00      0.00      0.00     91.00
  01시 06분 47초       5      2.94      0.00      2.94      0.00      0.00     94.12
  01시 06분 47초       6      2.02      0.00      1.01      0.00      0.00     96.97
  01시 06분 47초       7      4.26      0.00      0.00      0.00      0.00     95.74
  ```

- 네 번째 인자로 측정 횟수를 입력할 수 있다.

  ```sh
  sar -P ALL 1 1
  Linux 5.11.0-27-generic (ubun2-GL63-8RC) 	2021년 09월 06일 	_x86_64_	(8 CPU)

  01시 13분 35초     CPU     %user     %nice   %system   %iowait    %steal     %idle
  01시 13분 36초     all      1.13      0.00      0.38      0.00      0.00     98.49
  01시 13분 36초       0      0.00      0.00      0.00      0.00      0.00    100.00
  01시 13분 36초       1      0.00      0.00      0.00      0.00      0.00    100.00
  01시 13분 36초       2      1.96      0.00      0.98      0.00      0.00     97.06
  01시 13분 36초       3      2.02      0.00      1.01      0.00      0.00     96.97
  01시 13분 36초       4      3.00      0.00      1.00      0.00      0.00     96.00
  01시 13분 36초       5      1.03      0.00      0.00      0.00      0.00     98.97
  01시 13분 36초       6      0.00      0.00      0.00      0.00      0.00    100.00
  01시 13분 36초       7      1.00      0.00      0.00      0.00      0.00     99.00

  평균값:      CPU     %user     %nice   %system   %iowait    %steal     %idle
  평균값:      all      1.13      0.00      0.38      0.00      0.00     98.49
  평균값:        0      0.00      0.00      0.00      0.00      0.00    100.00
  평균값:        1      0.00      0.00      0.00      0.00      0.00    100.00
  평균값:        2      1.96      0.00      0.98      0.00      0.00     97.06
  평균값:        3      2.02      0.00      1.01      0.00      0.00     96.97
  평균값:        4      3.00      0.00      1.00      0.00      0.00     96.00
  평균값:        5      1.03      0.00      0.00      0.00      0.00     98.97
  평균값:        6      0.00      0.00      0.00      0.00      0.00    100.00
  평균값:        7      1.00      0.00      0.00      0.00      0.00     99.00
  ```

### 항목

- %user

- %nice

- %system

  - 커널 모드에서 시스템 콜 등의 처리를 실행하는 시간의 비율이다.